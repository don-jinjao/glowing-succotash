<!DOCTYPE html>
<html lang="ja">
<head>
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>みんなのナンプレ｜脳トレ会</title>
　<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2196f3">
  <meta name="description" content="誰でも無料で楽しめるナンプレ（数独）ゲーム。難易度別、毎週更新で脳トレにも最適。スマホ対応で広告も少なめ！" />
  <meta name="keywords" content="ナンプレ,数独,無料,脳トレ,パズル,ゲーム,脳トレ会" />
  <link rel="stylesheet" href="style.css" />

<style>
  .selected {
    background-color: #cceeff !important;
  }
  .conflict {
    border: 2px solid red !important;
  }
</style>
</head>
<body>

  <!-- オープニング -->
  <div id="opening">
    <img id="logo" src="logo.png.PNG" alt="ロゴ">
    <div id="title">脳トレ会</div>
    <img id="nampure" src="nampure.png.PNG" alt="ナンプレ画像">
  </div>

<!-- モード選択 -->
<div id="mode-select" style="display:none;">
  <h2>モードを選んでください</h2>
  <div id="title-name"></div>
  <p id="brain-count-area">取得した脳：<span id="brain-count">0</span>個</p>
  <p id="total-stars-area">取得した星：<span id="total-stars">0</span>個</p>
  <p id="current-title-area">称号：<span id="current-title">初心者</span></p>

  <button onclick="selectMode('easy')">かんたん</button>
  <button onclick="selectMode('normal')">ふつう</button>
  <button onclick="selectMode('hard')">むずかしい</button>
  <button onclick="selectMode('toudai')">東大脳</button>

  <!-- 盤面更新ボタン＋寄せ書き -->
  <div id="update-area">
    <button id="manual-update-btn" onclick="manualUpdate()">盤面更新ボタン</button>
    <p class="update-note">
      ※このボタンを押すと全ての盤面が新しく更新されるよ！<br>
      ただしゲットした脳と星はしっかり保管されます。
    </p>
    <p id="update-loading" style="display:none; font-weight:bold;">更新中…しばらくお待ちください</p>
  </div>

  <button id="stanford-btn" disabled onclick="selectMode('stanford')">スタンフォード脳（🧠50個以上）</button>
  <p id="stanford-note" style="color: #d32f2f; font-size: 0.95em;">
    ※🧠50個以上で解放されます
  </p>

  
  <button id="star-info-btn" onclick="toggleStarInfo()">⭐️の評価基準</button>
  <div id="star-info-popup" style="display:none; line-height: 1.8em; padding: 0.5em;">
    <p>⭐️3：3分以内にクリア</p>
    <p>⭐️2：10分以内にクリア</p>
    <p>⭐️1：とにかくクリア！</p>
    <p>🧠：むずかしいの⭐️3、東大脳の⭐️は🧠扱い</p>
  </div>
</div>
  <!-- シート選択 -->
  <div id="sheet-select" style="display:none;">
    <h2 id="sheet-title"></h2>
    <div id="sheet-list"></div>
    <button onclick="backToMode()">← 戻る</button>
  </div>

  <!-- ゲーム画面 -->
<div id="game-screen" style="display:none;">
  <h2 id="game-title"></h2>
  <table id="sudoku-board"></table>
  <div id="number-buttons"></div>
  <button id="check-answer-btn">答え合わせ</button>
  <button id="give-up-btn">あきらめる</button>
  <div id="result"></div>
  <div id="particles"></div>
</div>
  <!-- 諦め時の褒めコメント画面 -->
<div id="giveup-screen" style="display:none;">
  <p id="giveup-message" style="font-size:1.8em; color: #d32f2f; margin-top: 30vh;"></p>
</div>

<script src="phantom.js" defer></script>
<script src="script.js" defer></script>
</body>
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js')
      .then(() => console.log('Service Worker registered'))
      .catch(err => console.error('Service Worker registration failed:', err));
  }
</script>
</html>
